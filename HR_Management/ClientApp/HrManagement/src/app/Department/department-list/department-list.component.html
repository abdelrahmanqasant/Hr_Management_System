<div class="container mt-4">
  <h2>Departments</h2>



  <div>
    <a class="btn btn-primary" *ngIf="accountService.isAdmin()" routerLink="/departments/add">Add Department</a>
  </div>
  <!-- Filters -->
  <div class="row mb-3">
    <div class="col-md-6">
      <input type="text" class="form-control" placeholder="Search by name"
             [(ngModel)]="searchTerm" (input)="applyFilters()">
    </div>

  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p>Loading Departments...</p>
  </div>

  <!-- Table -->
  <table *ngIf="!isLoading && filteredDepartments.length > 0"
         class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Description</th>
        <th>CompanyName</th>
        <th>Created At</th>
        <th *ngIf="accountService.isAdmin()">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let department of filteredDepartments; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ department.name }}</td>
        <td>{{ department.description }}</td>
        <td>{{ department.companyName }}</td>
        <td>{{ department.createdAt | date:'dd/MM/yyyy , h:mm a'}}</td>
        <td>
          <a class="btn btn-warning btn-sm" *ngIf="accountService.isAdmin()" [routerLink]="['/departments/edit', department.id]">
            Edit
          </a>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Empty -->
  <div *ngIf="!isLoading && filteredDepartments.length === 0" class="alert alert-warning">
    No Departments found.
  </div>
</div>
